<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SV College of Engineering</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f5f7fa;
      color: #333;
    }
    
    /* Welcome Page Styles */
    .welcome-page {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #1a73e8, #4285f4);
      color: white;
      text-align: center;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .welcome-page::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="none"/><circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="2"/></svg>');
      background-size: 100px 100px;
      opacity: 0.1;
      animation: moveBackground 20s linear infinite;
    }
    
    @keyframes moveBackground {
      0% { transform: translate(0, 0); }
      100% { transform: translate(100px, 100px); }
    }
    
    .welcome-container {
      max-width: 600px;
      z-index: 1;
      animation: fadeIn 1s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .college-logo {
      width: 120px;
      height: 120px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0 auto 30px;
      font-size: 3rem;
      font-weight: bold;
    }
    
    .welcome-title {
      font-size: 2.5rem;
      margin-bottom: 20px;
      font-weight: 600;
    }
    
    .welcome-subtitle {
      font-size: 1.2rem;
      margin-bottom: 40px;
      opacity: 0.9;
    }
    
    .enter-btn {
      background: white;
      color: #1a73e8;
      border: none;
      border-radius: 50px;
      padding: 15px 40px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .enter-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
    }
    
    /* Main Page Styles */
    .main-page {
      display: none;
      min-height: 100vh;
      background-color: #f5f7fa;
    }
    
    header {
      background: linear-gradient(135deg, #1a73e8, #4285f4);
      color: white;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .college-name {
      font-size: 1.8rem;
      font-weight: 600;
    }
    
    .admin-btn {
      background: #e53935;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 8px 16px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .admin-btn:hover {
      background: #c62828;
      transform: translateY(-2px);
    }
    
    /* Menu Bar Styles */
    .menu-bar {
      background: #1a73e8;
      padding: 0;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .menu-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
    }
    
    .menu-item {
      flex: 1;
      text-align: center;
      padding: 15px 20px;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
    }
    
    .menu-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    .menu-item.active {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .menu-item.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: white;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* Content Sections */
    .content-section {
      display: none;
      animation: fadeIn 0.5s ease-out;
    }
    
    .content-section.active {
      display: block;
    }
    
    .section-header {
      margin-bottom: 20px;
      text-align: center;
    }
    
    .section-title {
      font-size: 1.8rem;
      color: #1a73e8;
      margin-bottom: 10px;
    }
    
    .section-description {
      color: #666;
      font-size: 1rem;
    }
    
    /* Branch and Semester Selection */
    .selection-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .selection-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .selection-label {
      font-weight: 500;
      color: #555;
    }
    
    .selection-dropdown {
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
      font-size: 1rem;
      min-width: 150px;
    }
    
    .view-btn {
      background: #1a73e8;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      align-self: flex-end;
    }
    
    .view-btn:hover {
      background: #0d47a1;
    }
    
    /* Resources Display */
    .resources-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .resource-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    
    .resource-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .resource-title {
      font-size: 1.2rem;
      color: #1a73e8;
      margin-bottom: 10px;
      font-weight: 500;
    }
    
    .resource-meta {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 15px;
    }
    
    .resource-actions {
      display: flex;
      gap: 10px;
      margin-top: auto;
    }
    
    .download-btn, .view-btn-small {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      flex: 1;
      text-align: center;
    }
    
    .download-btn {
      background: #34a853;
      color: white;
    }
    
    .download-btn:hover {
      background: #2e7d32;
    }
    
    .view-btn-small {
      background: #fbbc04;
      color: #333;
    }
    
    .view-btn-small:hover {
      background: #f9ab00;
    }
    
    .no-resources {
      text-align: center;
      padding: 40px;
      color: #666;
      font-size: 1.1rem;
    }
    
    /* Branches Container (for timetables) */
    .branches-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .branch-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    
    .branch-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .branch-title {
      color: #1a73e8;
      font-size: 1.5rem;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }
    
    .semesters {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    
    .semester-btn {
      background: #e8f0fe;
      color: #1a73e8;
      border: none;
      border-radius: 4px;
      padding: 10px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .semester-btn:hover {
      background: #d2e3fc;
    }
    
    .semester-btn.has-timetable {
      background: #e6f4ea;
      color: #34a853;
    }
    
    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      animation: modalSlideIn 0.3s ease-out;
    }
    
    @keyframes modalSlideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-size: 1.5rem;
      color: #1a73e8;
    }
    
    .close-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #757575;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    /* Auth Styles */
    .auth-tabs {
      display: flex;
      margin-bottom: 20px;
    }
    
    .auth-tab {
      flex: 1;
      padding: 10px;
      background: #f5f5f5;
      border: none;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .auth-tab:first-child {
      border-radius: 4px 0 0 4px;
    }
    
    .auth-tab:last-child {
      border-radius: 0 4px 4px 0;
    }
    
    .auth-tab.active {
      background: #1a73e8;
      color: white;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #555;
    }
    
    .form-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 1rem;
    }
    
    .form-group input:focus {
      border-color: #1a73e8;
      outline: none;
    }
    
    .error-message {
      color: #e53935;
      font-size: 0.8rem;
      margin-top: 5px;
      display: none;
    }
    
    .submit-btn {
      background: #1a73e8;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .submit-btn:hover {
      background: #0d47a1;
    }
    
    /* Admin Dashboard Styles */
    .admin-dashboard {
      display: none;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      margin-top: 20px;
    }
    
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .dashboard-title {
      font-size: 1.5rem;
      color: #1a73e8;
    }
    
    .logout-btn {
      background: #e53935;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 8px 16px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .logout-btn:hover {
      background: #c62828;
    }
    
    /* Admin Tabs */
    .admin-tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .admin-tab {
      padding: 10px 20px;
      background: none;
      border: none;
      cursor: pointer;
      font-weight: 500;
      color: #666;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .admin-tab.active {
      color: #1a73e8;
    }
    
    .admin-tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 2px;
      background: #1a73e8;
    }
    
    .admin-tab-content {
      display: none;
    }
    
    .admin-tab-content.active {
      display: block;
    }
    
    /* Upload Section */
    .upload-section {
      margin-bottom: 30px;
    }
    
    .upload-title {
      font-size: 1.2rem;
      margin-bottom: 15px;
      color: #333;
    }
    
    .upload-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }
    
    .upload-card {
      background: #f5f5f5;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .upload-card:hover {
      background: #e8f0fe;
    }
    
    .upload-card-title {
      font-weight: 500;
      margin-bottom: 10px;
    }
    
    .upload-input {
      display: none;
    }
    
    .upload-btn {
      background: #1a73e8;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 8px 16px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .upload-btn:hover {
      background: #0d47a1;
    }
    
    .upload-status {
      font-size: 0.8rem;
      margin-top: 5px;
      color: #555;
    }
    
    /* Gallery Section */
    .gallery-section {
      margin-top: 30px;
    }
    
    .gallery-title {
      font-size: 1.2rem;
      margin-bottom: 15px;
      color: #333;
    }
    
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }
    
    .gallery-item {
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      background: white;
    }
    
    .gallery-item img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      display: block;
    }
    
    .gallery-item-title {
      padding: 10px;
      font-size: 0.9rem;
      text-align: center;
      border-top: 1px solid #e0e0e0;
    }
    
    .delete-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(229, 57, 53, 0.8);
      color: white;
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      font-size: 0.8rem;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .delete-btn:hover {
      background: rgba(198, 40, 40, 0.9);
    }
    
    /* File Gallery */
    .file-gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
    }
    
    .file-gallery-item {
      background: white;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      position: relative;
    }
    
    .file-icon {
      font-size: 2rem;
      margin-bottom: 10px;
      text-align: center;
    }
    
    .file-info {
      margin-bottom: 10px;
    }
    
    .file-name {
      font-weight: 500;
      margin-bottom: 5px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .file-meta {
      font-size: 0.8rem;
      color: #666;
    }
    
    .file-actions {
      display: flex;
      gap: 10px;
    }
    
    .file-action-btn {
      flex: 1;
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }
    
    .view-file-btn {
      background: #fbbc04;
      color: #333;
    }
    
    .view-file-btn:hover {
      background: #f9ab00;
    }
    
    .delete-file-btn {
      background: #e53935;
      color: white;
    }
    
    .delete-file-btn:hover {
      background: #c62828;
    }
    
    /* Timetable Modal */
    .timetable-modal-content {
      background: white;
      border-radius: 8px;
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .timetable-image {
      width: 100%;
      display: block;
    }
    
    .no-timetable {
      text-align: center;
      padding: 40px;
      color: #757575;
    }
    
    /* PDF Viewer Modal */
    .pdf-viewer {
      width: 100%;
      height: 70vh;
      border: none;
    }
    
    /* Footer */
    footer {
      background: #333;
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .semesters {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .header-content {
        flex-direction: column;
        gap: 15px;
      }
      
      .upload-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      
      .gallery-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      
      .selection-container {
        flex-direction: column;
        align-items: center;
      }
      
      .menu-container {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Welcome Page -->
  <div class="welcome-page" id="welcomePage">
    <div class="welcome-container">
      <div class="college-logo">SVCK</div>
      <h1 class="welcome-title">Sri Venkateswara College of Engineering</h1>
      <p class="welcome-subtitle">Welcome to Student Portal</p>
      <button class="enter-btn" onclick="enterPortal()">Enter Portal</button>
    </div>
  </div>

  <!-- Main Page -->
  <div class="main-page" id="mainPage">
    <header>
      <div class="header-content">
        <h1 class="college-name">SV College of Engineering</h1>
        <button class="admin-btn" onclick="showAdminAuth()">Admin</button>
      </div>
    </header>
    
    <!-- Menu Bar -->
    <nav class="menu-bar">
      <div class="menu-container">
        <div class="menu-item active" onclick="showSection('timetables')">Timetables</div>
        <div class="menu-item" onclick="showSection('notes')">Notes (PDF)</div>
        <div class="menu-item" onclick="showSection('syllabus')">Syllabus Paper</div>
        <div class="menu-item" onclick="showSection('papers')">Previous Year Papers</div>
      </div>
    </nav>
    
    <div class="container">
      <!-- Timetables Section -->
      <div class="content-section active" id="timetablesSection">
        <div class="section-header">
          <h2 class="section-title">Timetables</h2>
          <p class="section-description">View timetables for different branches, semesters, and sections</p>
        </div>
        
        <div class="selection-container">
          <div class="selection-group">
            <label class="selection-label">Branch:</label>
            <select class="selection-dropdown" id="timetableBranch" onchange="updateTimetableSections()">
              <option value="">Select Branch</option>
              <option value="CSE">Computer Science & Engineering</option>
              <option value="ECE">Electronics & Communication Engineering</option>
              <option value="CSM">Computer Science & Machine Learning</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Semester:</label>
            <select class="selection-dropdown" id="timetableSemester" onchange="updateTimetableSections()">
              <option value="">Select Semester</option>
              <option value="1">Semester 1</option>
              <option value="2">Semester 2</option>
              <option value="3">Semester 3</option>
              <option value="4">Semester 4</option>
              <option value="5">Semester 5</option>
              <option value="6">Semester 6</option>
              <option value="7">Semester 7</option>
              <option value="8">Semester 8</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Section:</label>
            <select class="selection-dropdown" id="timetableSection">
              <option value="">Select Section</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">&nbsp;</label>
            <button class="view-btn" onclick="viewTimetable()">View Timetable</button>
          </div>
        </div>
        
        <div class="timetable-container" id="timetableContainer">
          <!-- Timetable will be displayed here -->
        </div>
      </div>
      
      <!-- Notes Section -->
      <div class="content-section" id="notesSection">
        <div class="section-header">
          <h2 class="section-title">Notes (PDF)</h2>
          <p class="section-description">Access study notes for different branches, semesters, and sections</p>
        </div>
        
        <div class="selection-container">
          <div class="selection-group">
            <label class="selection-label">Branch:</label>
            <select class="selection-dropdown" id="notesBranch" onchange="updateSections('notes')">
              <option value="">Select Branch</option>
              <option value="CSE">Computer Science & Engineering</option>
              <option value="ECE">Electronics & Communication Engineering</option>
              <option value="CSM">Computer Science & Machine Learning</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Semester:</label>
            <select class="selection-dropdown" id="notesSemester">
              <option value="">Select Semester</option>
              <option value="1">Semester 1</option>
              <option value="2">Semester 2</option>
              <option value="3">Semester 3</option>
              <option value="4">Semester 4</option>
              <option value="5">Semester 5</option>
              <option value="6">Semester 6</option>
              <option value="7">Semester 7</option>
              <option value="8">Semester 8</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Section:</label>
            <select class="selection-dropdown" id="notesSection">
              <option value="">Select Section</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">&nbsp;</label>
            <button class="view-btn" onclick="loadNotes()">View Notes</button>
          </div>
        </div>
        
        <div class="resources-container" id="notesContainer">
          <div class="no-resources">Please select branch, semester, and section to view notes</div>
        </div>
      </div>
      
      <!-- Syllabus Section -->
      <div class="content-section" id="syllabusSection">
        <div class="section-header">
          <h2 class="section-title">Syllabus Paper</h2>
          <p class="section-description">Access syllabus papers for different branches, semesters, and sections</p>
        </div>
        
        <div class="selection-container">
          <div class="selection-group">
            <label class="selection-label">Branch:</label>
            <select class="selection-dropdown" id="syllabusBranch" onchange="updateSections('syllabus')">
              <option value="">Select Branch</option>
              <option value="CSE">Computer Science & Engineering</option>
              <option value="ECE">Electronics & Communication Engineering</option>
              <option value="CSM">Computer Science & Machine Learning</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Semester:</label>
            <select class="selection-dropdown" id="syllabusSemester">
              <option value="">Select Semester</option>
              <option value="1">Semester 1</option>
              <option value="2">Semester 2</option>
              <option value="3">Semester 3</option>
              <option value="4">Semester 4</option>
              <option value="5">Semester 5</option>
              <option value="6">Semester 6</option>
              <option value="7">Semester 7</option>
              <option value="8">Semester 8</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Section:</label>
            <select class="selection-dropdown" id="syllabusSection">
              <option value="">Select Section</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">&nbsp;</label>
            <button class="view-btn" onclick="loadSyllabus()">View Syllabus</button>
          </div>
        </div>
        
        <div class="resources-container" id="syllabusContainer">
          <div class="no-resources">Please select branch, semester, and section to view syllabus</div>
        </div>
      </div>
      
      <!-- Previous Year Papers Section -->
      <div class="content-section" id="papersSection">
        <div class="section-header">
          <h2 class="section-title">Previous Year Papers</h2>
          <p class="section-description">Access previous year question papers for different branches, semesters, and sections</p>
        </div>
        
        <div class="selection-container">
          <div class="selection-group">
            <label class="selection-label">Branch:</label>
            <select class="selection-dropdown" id="papersBranch" onchange="updateSections('papers')">
              <option value="">Select Branch</option>
              <option value="CSE">Computer Science & Engineering</option>
              <option value="ECE">Electronics & Communication Engineering</option>
              <option value="CSM">Computer Science & Machine Learning</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Semester:</label>
            <select class="selection-dropdown" id="papersSemester">
              <option value="">Select Semester</option>
              <option value="1">Semester 1</option>
              <option value="2">Semester 2</option>
              <option value="3">Semester 3</option>
              <option value="4">Semester 4</option>
              <option value="5">Semester 5</option>
              <option value="6">Semester 6</option>
              <option value="7">Semester 7</option>
              <option value="8">Semester 8</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">Section:</label>
            <select class="selection-dropdown" id="papersSection">
              <option value="">Select Section</option>
            </select>
          </div>
          
          <div class="selection-group">
            <label class="selection-label">&nbsp;</label>
            <button class="view-btn" onclick="loadPapers()">View Papers</button>
          </div>
        </div>
        
        <div class="resources-container" id="papersContainer">
          <div class="no-resources">Please select branch, semester, and section to view papers</div>
        </div>
      </div>
      
      <!-- Admin Dashboard (Hidden by default) -->
      <div class="admin-dashboard" id="adminDashboard">
        <div class="dashboard-header">
          <h2 class="dashboard-title">Admin Dashboard</h2>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
        
        <!-- Admin Tabs -->
        <div class="admin-tabs">
          <button class="admin-tab active" onclick="switchAdminTab('timetables')">Timetables</button>
          <button class="admin-tab" onclick="switchAdminTab('notes')">Notes (PDF)</button>
          <button class="admin-tab" onclick="switchAdminTab('syllabus')">Syllabus</button>
          <button class="admin-tab" onclick="switchAdminTab('papers')">Previous Papers</button>
        </div>
        
        <!-- Timetables Tab Content -->
        <div class="admin-tab-content active" id="timetablesTabContent">
          <div class="upload-section">
            <h3 class="upload-title">Upload Timetables</h3>
            <div class="upload-grid" id="timetableUploadGrid">
              <!-- Upload cards will be dynamically generated -->
            </div>
          </div>
          
          <div class="gallery-section">
            <h3 class="gallery-title">Uploaded Timetables</h3>
            <div class="gallery-grid" id="timetableGallery">
              <!-- Gallery items will be dynamically generated -->
            </div>
          </div>
        </div>
        
        <!-- Notes Tab Content -->
        <div class="admin-tab-content" id="notesTabContent">
          <div class="upload-section">
            <h3 class="upload-title">Upload Notes (PDF)</h3>
            <div class="upload-grid" id="notesUploadGrid">
              <!-- Upload cards will be dynamically generated -->
            </div>
          </div>
          
          <div class="gallery-section">
            <h3 class="gallery-title">Uploaded Notes</h3>
            <div class="file-gallery-grid" id="notesGallery">
              <!-- File gallery items will be dynamically generated -->
            </div>
          </div>
        </div>
        
        <!-- Syllabus Tab Content -->
        <div class="admin-tab-content" id="syllabusTabContent">
          <div class="upload-section">
            <h3 class="upload-title">Upload Syllabus Papers</h3>
            <div class="upload-grid" id="syllabusUploadGrid">
              <!-- Upload cards will be dynamically generated -->
            </div>
          </div>
          
          <div class="gallery-section">
            <h3 class="gallery-title">Uploaded Syllabus Papers</h3>
            <div class="file-gallery-grid" id="syllabusGallery">
              <!-- File gallery items will be dynamically generated -->
            </div>
          </div>
        </div>
        
        <!-- Previous Papers Tab Content -->
        <div class="admin-tab-content" id="papersTabContent">
          <div class="upload-section">
            <h3 class="upload-title">Upload Previous Year Papers</h3>
            <div class="upload-grid" id="papersUploadGrid">
              <!-- Upload cards will be dynamically generated -->
            </div>
          </div>
          
          <div class="gallery-section">
            <h3 class="gallery-title">Uploaded Previous Year Papers</h3>
            <div class="file-gallery-grid" id="papersGallery">
              <!-- File gallery items will be dynamically generated -->
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <footer>
      <p>&copy; 2023 SV College of Engineering. Developed by C. Babu 23KH1A0519</p>
    </footer>
  </div>

  <!-- Admin Authentication Modal -->
  <div class="modal" id="authModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="authModalTitle">Admin Login</h2>
        <button class="close-btn" onclick="closeAuthModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="auth-tabs">
          <button class="auth-tab active" id="loginTab" onclick="switchAuthTab('login')">Login</button>
          <button class="auth-tab" id="registerTab" onclick="switchAuthTab('register')">Register</button>
        </div>
        
        <!-- Login Form -->
        <form id="loginForm">
          <div class="form-group">
            <label for="loginUsername">Username</label>
            <input type="text" id="loginUsername" required>
            <div class="error-message" id="loginUsernameError"></div>
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword" required>
            <div class="error-message" id="loginPasswordError"></div>
          </div>
          <button type="submit" class="submit-btn">Login</button>
        </form>
        
        <!-- Register Form (Hidden by default) -->
        <form id="registerForm" style="display: none;">
          <div class="form-group">
            <label for="registerUsername">Username</label>
            <input type="text" id="registerUsername" required>
            <div class="error-message" id="registerUsernameError"></div>
          </div>
          <div class="form-group">
            <label for="registerEmail">Email</label>
            <input type="email" id="registerEmail" required>
            <div class="error-message" id="registerEmailError"></div>
          </div>
          <div class="form-group">
            <label for="registerPassword">Password</label>
            <input type="password" id="registerPassword" required>
            <div class="error-message" id="registerPasswordError"></div>
          </div>
          <div class="form-group">
            <label for="registerConfirmPassword">Confirm Password</label>
            <input type="password" id="registerConfirmPassword" required>
            <div class="error-message" id="registerConfirmPasswordError"></div>
          </div>
          <button type="submit" class="submit-btn">Register</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Timetable Modal -->
  <div class="modal" id="timetableModal">
    <div class="timetable-modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="timetableModalTitle">Timetable</h2>
        <button class="close-btn" onclick="closeTimetableModal()">&times;</button>
      </div>
      <div class="modal-body" id="timetableModalBody">
        <!-- Timetable content will be dynamically generated -->
      </div>
    </div>
  </div>

  <!-- PDF Viewer Modal -->
  <div class="modal" id="pdfModal">
    <div class="timetable-modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="pdfModalTitle">PDF Viewer</h2>
        <button class="close-btn" onclick="closePdfModal()">&times;</button>
      </div>
      <div class="modal-body">
        <iframe id="pdfViewer" class="pdf-viewer" src=""></iframe>
      </div>
    </div>
  </div>

  <script>
    // Initialize data
    const branches = ['CSE', 'ECE', 'CSM'];
    const semesters = [1, 2, 3, 4, 5, 6, 7, 8];
    const sections = {
      'CSE': ['A', 'B', 'C'],
      'ECE': ['A', 'B'],
      'CSM': ['A']
    };
    
    // Initialize local storage
    function initializeStorage() {
      if (!localStorage.getItem('adminUsers')) {
        localStorage.setItem('adminUsers', JSON.stringify([{
          username: 'admin',
          email: 'admin@svcollege.edu',
          password: 'admin123'
        }]));
      }
      
      if (!localStorage.getItem('timetables')) {
        localStorage.setItem('timetables', JSON.stringify({}));
      }
      
      if (!localStorage.getItem('notes')) {
        localStorage.setItem('notes', JSON.stringify({}));
      }
      
      if (!localStorage.getItem('syllabus')) {
        localStorage.setItem('syllabus', JSON.stringify({}));
      }
      
      if (!localStorage.getItem('papers')) {
        localStorage.setItem('papers', JSON.stringify({}));
      }
    }
    
    // Enter portal from welcome page
    function enterPortal() {
      document.getElementById('welcomePage').style.display = 'none';
      document.getElementById('mainPage').style.display = 'block';
    }
    
    // Update sections based on selected branch
    function updateSections(type) {
      const branchId = type + 'Branch';
      const sectionId = type + 'Section';
      const branch = document.getElementById(branchId).value;
      const sectionSelect = document.getElementById(sectionId);
      
      // Clear current sections
      sectionSelect.innerHTML = '<option value="">Select Section</option>';
      
      if (branch && sections[branch]) {
        sections[branch].forEach(section => {
          const option = document.createElement('option');
          option.value = section;
          option.textContent = 'Section ' + section;
          sectionSelect.appendChild(option);
        });
      }
    }
    
    // Update timetable sections
    function updateTimetableSections() {
      const branch = document.getElementById('timetableBranch').value;
      const semester = document.getElementById('timetableSemester').value;
      const sectionSelect = document.getElementById('timetableSection');
      
      // Clear current sections
      sectionSelect.innerHTML = '<option value="">Select Section</option>';
      
      if (branch && semester && sections[branch]) {
        sections[branch].forEach(section => {
          const option = document.createElement('option');
          option.value = section;
          option.textContent = 'Section ' + section;
          sectionSelect.appendChild(option);
        });
      }
    }
    
    // Show content section
    function showSection(section) {
      // Hide all sections
      document.querySelectorAll('.content-section').forEach(el => {
        el.classList.remove('active');
      });
      
      // Remove active class from all menu items
      document.querySelectorAll('.menu-item').forEach(el => {
        el.classList.remove('active');
      });
      
      // Show selected section
      document.getElementById(section + 'Section').classList.add('active');
      
      // Add active class to selected menu item
      event.target.classList.add('active');
    }
    
    // View timetable
    function viewTimetable() {
      const branch = document.getElementById('timetableBranch').value;
      const semester = document.getElementById('timetableSemester').value;
      const sectionName = document.getElementById('timetableSection').value;
      const container = document.getElementById('timetableContainer');
      
      if (!branch || !semester || !sectionName) {
        container.innerHTML = '<div class="no-timetable">Please select branch, semester, and section</div>';
        return;
      }
      
      const timetables = JSON.parse(localStorage.getItem('timetables')) || {};
      const key = `${branch}-${semester}-${sectionName}`;
      
      if (timetables[key]) {
        container.innerHTML = `<img src="${timetables[key]}" alt="${branch} Semester ${semester} Section ${sectionName} Timetable" class="timetable-image">`;
      } else {
        container.innerHTML = '<div class="no-timetable">No timetable available for this selection</div>';
      }
    }
    
    // Load notes
    function loadNotes() {
      const branch = document.getElementById('notesBranch').value;
      const semester = document.getElementById('notesSemester').value;
      const sectionName = document.getElementById('notesSection').value;
      const container = document.getElementById('notesContainer');
      
      if (!branch || !semester || !sectionName) {
        container.innerHTML = '<div class="no-resources">Please select branch, semester, and section</div>';
        return;
      }
      
      const notes = JSON.parse(localStorage.getItem('notes')) || {};
      const key = `${branch}-${semester}-${sectionName}`;
      const notesData = notes[key] || [];
      
      if (notesData.length === 0) {
        container.innerHTML = '<div class="no-resources">No notes available for this selection</div>';
        return;
      }
      
      container.innerHTML = '';
      
      notesData.forEach((note, index) => {
        const card = document.createElement('div');
        card.className = 'resource-card';
        
        const title = document.createElement('h3');
        title.className = 'resource-title';
        title.textContent = note.name || `Note ${index + 1}`;
        
        const meta = document.createElement('div');
        meta.className = 'resource-meta';
        meta.textContent = `${branch} - Semester ${semester} - Section ${sectionName}`;
        
        const actions = document.createElement('div');
        actions.className = 'resource-actions';
        
        const viewBtn = document.createElement('button');
        viewBtn.className = 'view-btn-small';
        viewBtn.textContent = 'View';
        viewBtn.onclick = () => viewPDF(note.data, note.name || `Note ${index + 1}`);
        
        const downloadBtn = document.createElement('button');
        downloadBtn.className = 'download-btn';
        downloadBtn.textContent = 'Download';
        downloadBtn.onclick = () => downloadFile(note.data, note.name || `Note ${index + 1}`);
        
        actions.appendChild(viewBtn);
        actions.appendChild(downloadBtn);
        
        card.appendChild(title);
        card.appendChild(meta);
        card.appendChild(actions);
        
        container.appendChild(card);
      });
    }
    
    // Load syllabus
    function loadSyllabus() {
      const branch = document.getElementById('syllabusBranch').value;
      const semester = document.getElementById('syllabusSemester').value;
      const sectionName = document.getElementById('syllabusSection').value;
      const container = document.getElementById('syllabusContainer');
      
      if (!branch || !semester || !sectionName) {
        container.innerHTML = '<div class="no-resources">Please select branch, semester, and section</div>';
        return;
      }
      
      const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
      const key = `${branch}-${semester}-${sectionName}`;
      const syllabusData = syllabus[key] || [];
      
      if (syllabusData.length === 0) {
        container.innerHTML = '<div class="no-resources">No syllabus papers available for this selection</div>';
        return;
      }
      
      container.innerHTML = '';
      
      syllabusData.forEach((paper, index) => {
        const card = document.createElement('div');
        card.className = 'resource-card';
        
        const title = document.createElement('h3');
        title.className = 'resource-title';
        title.textContent = paper.name || `Syllabus Paper ${index + 1}`;
        
        const meta = document.createElement('div');
        meta.className = 'resource-meta';
        meta.textContent = `${branch} - Semester ${semester} - Section ${sectionName}`;
        
        const actions = document.createElement('div');
        actions.className = 'resource-actions';
        
        const viewBtn = document.createElement('button');
        viewBtn.className = 'view-btn-small';
        viewBtn.textContent = 'View';
        viewBtn.onclick = () => viewPDF(paper.data, paper.name || `Syllabus Paper ${index + 1}`);
        
        const downloadBtn = document.createElement('button');
        downloadBtn.className = 'download-btn';
        downloadBtn.textContent = 'Download';
        downloadBtn.onclick = () => downloadFile(paper.data, paper.name || `Syllabus Paper ${index + 1}`);
        
        actions.appendChild(viewBtn);
        actions.appendChild(downloadBtn);
        
        card.appendChild(title);
        card.appendChild(meta);
        card.appendChild(actions);
        
        container.appendChild(card);
      });
    }
    
    // Load previous year papers
    function loadPapers() {
      const branch = document.getElementById('papersBranch').value;
      const semester = document.getElementById('papersSemester').value;
      const sectionName = document.getElementById('papersSection').value;
      const container = document.getElementById('papersContainer');
      
      if (!branch || !semester || !sectionName) {
        container.innerHTML = '<div class="no-resources">Please select branch, semester, and section</div>';
        return;
      }
      
      const papers = JSON.parse(localStorage.getItem('papers')) || {};
      const key = `${branch}-${semester}-${sectionName}`;
      const papersData = papers[key] || [];
      
      if (papersData.length === 0) {
        container.innerHTML = '<div class="no-resources">No previous year papers available for this selection</div>';
        return;
      }
      
      container.innerHTML = '';
      
      papersData.forEach((paper, index) => {
        const card = document.createElement('div');
        card.className = 'resource-card';
        
        const title = document.createElement('h3');
        title.className = 'resource-title';
        title.textContent = paper.name || `Previous Year Paper ${index + 1}`;
        
        const meta = document.createElement('div');
        meta.className = 'resource-meta';
        meta.textContent = `${branch} - Semester ${semester} - Section ${sectionName}`;
        
        const actions = document.createElement('div');
        actions.className = 'resource-actions';
        
        const viewBtn = document.createElement('button');
        viewBtn.className = 'view-btn-small';
        viewBtn.textContent = 'View';
        viewBtn.onclick = () => viewPDF(paper.data, paper.name || `Previous Year Paper ${index + 1}`);
        
        const downloadBtn = document.createElement('button');
        downloadBtn.className = 'download-btn';
        downloadBtn.textContent = 'Download';
        downloadBtn.onclick = () => downloadFile(paper.data, paper.name || `Previous Year Paper ${index + 1}`);
        
        actions.appendChild(viewBtn);
        actions.appendChild(downloadBtn);
        
        card.appendChild(title);
        card.appendChild(meta);
        card.appendChild(actions);
        
        container.appendChild(card);
      });
    }
    
    // View PDF
    function viewPDF(data, name) {
      const modal = document.getElementById('pdfModal');
      const title = document.getElementById('pdfModalTitle');
      const viewer = document.getElementById('pdfViewer');
      
      title.textContent = name;
      viewer.src = data;
      
      modal.style.display = 'flex';
    }
    
    // Close PDF modal
    function closePdfModal() {
      document.getElementById('pdfModal').style.display = 'none';
      document.getElementById('pdfViewer').src = '';
    }
    
    // Download file
    function downloadFile(data, name) {
      const link = document.createElement('a');
      link.href = data;
      link.download = name;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
    
    // Show admin authentication modal
    function showAdminAuth() {
      document.getElementById('authModal').style.display = 'flex';
      switchAuthTab('login');
    }
    
    // Close admin authentication modal
    function closeAuthModal() {
      document.getElementById('authModal').style.display = 'none';
      resetAuthForms();
    }
    
    // Switch between login and register tabs
    function switchAuthTab(tab) {
      const loginTab = document.getElementById('loginTab');
      const registerTab = document.getElementById('registerTab');
      const loginForm = document.getElementById('loginForm');
      const registerForm = document.getElementById('registerForm');
      const authModalTitle = document.getElementById('authModalTitle');
      
      if (tab === 'login') {
        loginTab.classList.add('active');
        registerTab.classList.remove('active');
        loginForm.style.display = 'block';
        registerForm.style.display = 'none';
        authModalTitle.textContent = 'Admin Login';
      } else {
        loginTab.classList.remove('active');
        registerTab.classList.add('active');
        loginForm.style.display = 'none';
        registerForm.style.display = 'block';
        authModalTitle.textContent = 'Admin Registration';
      }
    }
    
    // Reset auth forms
    function resetAuthForms() {
      document.getElementById('loginForm').reset();
      document.getElementById('registerForm').reset();
      
      // Hide error messages
      document.querySelectorAll('.error-message').forEach(el => {
        el.style.display = 'none';
      });
    }
    
    // Handle login form submission
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const username = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;
      
      // Reset error messages
      document.getElementById('loginUsernameError').style.display = 'none';
      document.getElementById('loginPasswordError').style.display = 'none';
      
      // Validate inputs
      if (!username) {
        document.getElementById('loginUsernameError').textContent = 'Username is required';
        document.getElementById('loginUsernameError').style.display = 'block';
        return;
      }
      
      if (!password) {
        document.getElementById('loginPasswordError').textContent = 'Password is required';
        document.getElementById('loginPasswordError').style.display = 'block';
        return;
      }
      
      // Check against database
      const users = JSON.parse(localStorage.getItem('adminUsers')) || [];
      const authenticatedUser = users.find(user => user.username === username && user.password === password);
      
      if (authenticatedUser) {
        // Store admin session
        sessionStorage.setItem('adminLoggedIn', 'true');
        sessionStorage.setItem('adminUsername', username);
        
        // Show admin dashboard
        document.getElementById('adminDashboard').style.display = 'block';
        closeAuthModal();
        generateUploadCards();
        loadGalleries();
        
        // Scroll to admin dashboard
        document.getElementById('adminDashboard').scrollIntoView({ behavior: 'smooth' });
      } else {
        document.getElementById('loginPasswordError').textContent = 'Invalid username or password';
        document.getElementById('loginPasswordError').style.display = 'block';
      }
    });
    
    // Handle register form submission
    document.getElementById('registerForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const username = document.getElementById('registerUsername').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const confirmPassword = document.getElementById('registerConfirmPassword').value;
      
      // Reset error messages
      document.querySelectorAll('#registerForm .error-message').forEach(el => {
        el.style.display = 'none';
      });
      
      // Validate inputs
      let hasError = false;
      
      if (!username) {
        document.getElementById('registerUsernameError').textContent = 'Username is required';
        document.getElementById('registerUsernameError').style.display = 'block';
        hasError = true;
      }
      
      if (!email) {
        document.getElementById('registerEmailError').textContent = 'Email is required';
        document.getElementById('registerEmailError').style.display = 'block';
        hasError = true;
      } else if (!isValidEmail(email)) {
        document.getElementById('registerEmailError').textContent = 'Please enter a valid email';
        document.getElementById('registerEmailError').style.display = 'block';
        hasError = true;
      }
      
      if (!password) {
        document.getElementById('registerPasswordError').textContent = 'Password is required';
        document.getElementById('registerPasswordError').style.display = 'block';
        hasError = true;
      } else if (password.length < 6) {
        document.getElementById('registerPasswordError').textContent = 'Password must be at least 6 characters';
        document.getElementById('registerPasswordError').style.display = 'block';
        hasError = true;
      }
      
      if (!confirmPassword) {
        document.getElementById('registerConfirmPasswordError').textContent = 'Please confirm your password';
        document.getElementById('registerConfirmPasswordError').style.display = 'block';
        hasError = true;
      } else if (password !== confirmPassword) {
        document.getElementById('registerConfirmPasswordError').textContent = 'Passwords do not match';
        document.getElementById('registerConfirmPasswordError').style.display = 'block';
        hasError = true;
      }
      
      if (hasError) return;
      
      // Check if username already exists
      const users = JSON.parse(localStorage.getItem('adminUsers')) || [];
      const existingUser = users.find(user => user.username === username);
      
      if (existingUser) {
        document.getElementById('registerUsernameError').textContent = 'Username already exists';
        document.getElementById('registerUsernameError').style.display = 'block';
        return;
      }
      
      // Add new user
      const newUser = {
        username,
        email,
        password
      };
      
      users.push(newUser);
      localStorage.setItem('adminUsers', JSON.stringify(users));
      
      // Show success message and switch to login
      alert('Registration successful! Please login.');
      switchAuthTab('login');
    });
    
    // Validate email
    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }
    
    // Switch admin tab
    function switchAdminTab(tab) {
      // Hide all tab contents
      document.querySelectorAll('.admin-tab-content').forEach(el => {
        el.classList.remove('active');
      });
      
      // Remove active class from all tabs
      document.querySelectorAll('.admin-tab').forEach(el => {
        el.classList.remove('active');
      });
      
      // Show selected tab content
      document.getElementById(tab + 'TabContent').classList.add('active');
      
      // Add active class to selected tab
      event.target.classList.add('active');
    }
    
    // Generate upload cards
    function generateUploadCards() {
      // Generate timetable upload cards
      const timetableUploadGrid = document.getElementById('timetableUploadGrid');
      timetableUploadGrid.innerHTML = '';
      
      branches.forEach(branch => {
        semesters.forEach(semester => {
          sections[branch].forEach(sectionName => {
            const card = document.createElement('div');
            card.className = 'upload-card';
            
            const title = document.createElement('div');
            title.className = 'upload-card-title';
            title.textContent = `${branch} - Sem ${semester} - Sec ${sectionName}`;
            
            const input = document.createElement('input');
            input.type = 'file';
            input.className = 'upload-input';
            input.id = `timetable-upload-${branch}-${semester}-${sectionName}`;
            input.accept = 'image/*';
            input.onchange = (e) => handleTimetableUpload(e, branch, semester, sectionName);
            
            const btn = document.createElement('button');
            btn.className = 'upload-btn';
            btn.textContent = 'Upload';
            btn.onclick = () => input.click();
            
            const status = document.createElement('div');
            status.className = 'upload-status';
            status.id = `timetable-status-${branch}-${semester}-${sectionName}`;
            
            // Check if timetable exists
            const timetableKey = `${branch}-${semester}-${sectionName}`;
            const timetables = JSON.parse(localStorage.getItem('timetables')) || {};
            if (timetables[timetableKey]) {
              status.textContent = 'Timetable uploaded';
            } else {
              status.textContent = 'No timetable uploaded';
            }
            
            card.appendChild(title);
            card.appendChild(input);
            card.appendChild(btn);
            card.appendChild(status);
            
            timetableUploadGrid.appendChild(card);
          });
        });
      });
      
      // Generate notes upload cards
      const notesUploadGrid = document.getElementById('notesUploadGrid');
      notesUploadGrid.innerHTML = '';
      
      branches.forEach(branch => {
        semesters.forEach(semester => {
          sections[branch].forEach(sectionName => {
            const card = document.createElement('div');
            card.className = 'upload-card';
            
            const title = document.createElement('div');
            title.className = 'upload-card-title';
            title.textContent = `${branch} - Sem ${semester} - Sec ${sectionName}`;
            
            const input = document.createElement('input');
            input.type = 'file';
            input.className = 'upload-input';
            input.id = `notes-upload-${branch}-${semester}-${sectionName}`;
            input.accept = '.pdf';
            input.onchange = (e) => handleNotesUpload(e, branch, semester, sectionName);
            
            const btn = document.createElement('button');
            btn.className = 'upload-btn';
            btn.textContent = 'Upload';
            btn.onclick = () => input.click();
            
            const status = document.createElement('div');
            status.className = 'upload-status';
            status.id = `notes-status-${branch}-${semester}-${sectionName}`;
            
            // Check if notes exist
            const notesKey = `${branch}-${semester}-${sectionName}`;
            const notes = JSON.parse(localStorage.getItem('notes')) || {};
            if (notes[notesKey] && notes[notesKey].length > 0) {
              status.textContent = `${notes[notesKey].length} note(s) uploaded`;
            } else {
              status.textContent = 'No notes uploaded';
            }
            
            card.appendChild(title);
            card.appendChild(input);
            card.appendChild(btn);
            card.appendChild(status);
            
            notesUploadGrid.appendChild(card);
          });
        });
      });
      
      // Generate syllabus upload cards
      const syllabusUploadGrid = document.getElementById('syllabusUploadGrid');
      syllabusUploadGrid.innerHTML = '';
      
      branches.forEach(branch => {
        semesters.forEach(semester => {
          sections[branch].forEach(sectionName => {
            const card = document.createElement('div');
            card.className = 'upload-card';
            
            const title = document.createElement('div');
            title.className = 'upload-card-title';
            title.textContent = `${branch} - Sem ${semester} - Sec ${sectionName}`;
            
            const input = document.createElement('input');
            input.type = 'file';
            input.className = 'upload-input';
            input.id = `syllabus-upload-${branch}-${semester}-${sectionName}`;
            input.accept = '.pdf';
            input.onchange = (e) => handleSyllabusUpload(e, branch, semester, sectionName);
            
            const btn = document.createElement('button');
            btn.className = 'upload-btn';
            btn.textContent = 'Upload';
            btn.onclick = () => input.click();
            
            const status = document.createElement('div');
            status.className = 'upload-status';
            status.id = `syllabus-status-${branch}-${semester}-${sectionName}`;
            
            // Check if syllabus papers exist
            const syllabusKey = `${branch}-${semester}-${sectionName}`;
            const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
            if (syllabus[syllabusKey] && syllabus[syllabusKey].length > 0) {
              status.textContent = `${syllabus[syllabusKey].length} paper(s) uploaded`;
            } else {
              status.textContent = 'No syllabus papers uploaded';
            }
            
            card.appendChild(title);
            card.appendChild(input);
            card.appendChild(btn);
            card.appendChild(status);
            
            syllabusUploadGrid.appendChild(card);
          });
        });
      });
      
      // Generate papers upload cards
      const papersUploadGrid = document.getElementById('papersUploadGrid');
      papersUploadGrid.innerHTML = '';
      
      branches.forEach(branch => {
        semesters.forEach(semester => {
          sections[branch].forEach(sectionName => {
            const card = document.createElement('div');
            card.className = 'upload-card';
            
            const title = document.createElement('div');
            title.className = 'upload-card-title';
            title.textContent = `${branch} - Sem ${semester} - Sec ${sectionName}`;
            
            const input = document.createElement('input');
            input.type = 'file';
            input.className = 'upload-input';
            input.id = `papers-upload-${branch}-${semester}-${sectionName}`;
            input.accept = '.pdf';
            input.onchange = (e) => handlePapersUpload(e, branch, semester, sectionName);
            
            const btn = document.createElement('button');
            btn.className = 'upload-btn';
            btn.textContent = 'Upload';
            btn.onclick = () => input.click();
            
            const status = document.createElement('div');
            status.className = 'upload-status';
            status.id = `papers-status-${branch}-${semester}-${sectionName}`;
            
            // Check if previous year papers exist
            const papersKey = `${branch}-${semester}-${sectionName}`;
            const papers = JSON.parse(localStorage.getItem('papers')) || {};
            if (papers[papersKey] && papers[papersKey].length > 0) {
              status.textContent = `${papers[papersKey].length} paper(s) uploaded`;
            } else {
              status.textContent = 'No previous year papers uploaded';
            }
            
            card.appendChild(title);
            card.appendChild(input);
            card.appendChild(btn);
            card.appendChild(status);
            
            papersUploadGrid.appendChild(card);
          });
        });
      });
    }
    
    // Handle timetable upload
    function handleTimetableUpload(event, branch, semester, sectionName) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        // Store image in localStorage
        const timetables = JSON.parse(localStorage.getItem('timetables')) || {};
        const key = `${branch}-${semester}-${sectionName}`;
        timetables[key] = e.target.result;
        localStorage.setItem('timetables', JSON.stringify(timetables));
        
        // Update status
        document.getElementById(`timetable-status-${branch}-${semester}-${sectionName}`).textContent = 'Timetable uploaded';
        
        // Update gallery
        loadTimetableGallery();
        
        // Refresh student view if currently viewing timetables
        refreshTimetableView(branch, semester, sectionName);
        
        // Show success message
        alert(`Timetable for ${branch} Semester ${semester} Section ${sectionName} uploaded successfully!`);
        
        // Reset file input
        event.target.value = '';
      };
      reader.readAsDataURL(file);
    }
    
    // Handle notes upload
    function handleNotesUpload(event, branch, semester, sectionName) {
      const file = event.target.files[0];
      if (!file) return;
      
      // Check if file is PDF
      if (!file.type.includes('pdf') && !file.name.toLowerCase().endsWith('.pdf')) {
        alert('Please upload PDF files only.');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        // Store PDF in localStorage
        const notes = JSON.parse(localStorage.getItem('notes')) || {};
        const key = `${branch}-${semester}-${sectionName}`;
        
        if (!notes[key]) {
          notes[key] = [];
        }
        
        // Add new file
        notes[key].push({
          name: file.name,
          data: e.target.result,
          uploaded: new Date().toLocaleDateString()
        });
        
        localStorage.setItem('notes', JSON.stringify(notes));
        
        // Update status
        document.getElementById(`notes-status-${branch}-${semester}-${sectionName}`).textContent = `${notes[key].length} note(s) uploaded`;
        
        // Update gallery
        loadNotesGallery();
        
        // Refresh student view if currently viewing notes
        refreshStudentView('notes', branch, semester, sectionName);
        
        // Show success message
        alert(`Note "${file.name}" uploaded successfully for ${branch} Semester ${semester} Section ${sectionName}!`);
        
        // Reset file input
        event.target.value = '';
      };
      reader.readAsDataURL(file);
    }
    
    // Handle syllabus upload
    function handleSyllabusUpload(event, branch, semester, sectionName) {
      const file = event.target.files[0];
      if (!file) return;
      
      // Check if file is PDF
      if (!file.type.includes('pdf') && !file.name.toLowerCase().endsWith('.pdf')) {
        alert('Please upload PDF files only.');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        // Store PDF in localStorage
        const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
        const key = `${branch}-${semester}-${sectionName}`;
        
        if (!syllabus[key]) {
          syllabus[key] = [];
        }
        
        // Add new file
        syllabus[key].push({
          name: file.name,
          data: e.target.result,
          uploaded: new Date().toLocaleDateString()
        });
        
        localStorage.setItem('syllabus', JSON.stringify(syllabus));
        
        // Update status
        document.getElementById(`syllabus-status-${branch}-${semester}-${sectionName}`).textContent = `${syllabus[key].length} paper(s) uploaded`;
        
        // Update gallery
        loadSyllabusGallery();
        
        // Refresh student view if currently viewing syllabus
        refreshStudentView('syllabus', branch, semester, sectionName);
        
        // Show success message
        alert(`Syllabus paper "${file.name}" uploaded successfully for ${branch} Semester ${semester} Section ${sectionName}!`);
        
        // Reset file input
        event.target.value = '';
      };
      reader.readAsDataURL(file);
    }
    
    // Handle papers upload
    function handlePapersUpload(event, branch, semester, sectionName) {
      const file = event.target.files[0];
      if (!file) return;
      
      // Check if file is PDF
      if (!file.type.includes('pdf') && !file.name.toLowerCase().endsWith('.pdf')) {
        alert('Please upload PDF files only.');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        // Store PDF in localStorage
        const papers = JSON.parse(localStorage.getItem('papers')) || {};
        const key = `${branch}-${semester}-${sectionName}`;
        
        if (!papers[key]) {
          papers[key] = [];
        }
        
        // Add new file
        papers[key].push({
          name: file.name,
          data: e.target.result,
          uploaded: new Date().toLocaleDateString()
        });
        
        localStorage.setItem('papers', JSON.stringify(papers));
        
        // Update status
        document.getElementById(`papers-status-${branch}-${semester}-${sectionName}`).textContent = `${papers[key].length} paper(s) uploaded`;
        
        // Update gallery
        loadPapersGallery();
        
        // Refresh student view if currently viewing papers
        refreshStudentView('papers', branch, semester, sectionName);
        
        // Show success message
        alert(`Previous year paper "${file.name}" uploaded successfully for ${branch} Semester ${semester} Section ${sectionName}!`);
        
        // Reset file input
        event.target.value = '';
      };
      reader.readAsDataURL(file);
    }
    
    // Refresh timetable view
    function refreshTimetableView(branch, semester, sectionName) {
      // Check if timetables section is currently active
      const timetablesSection = document.getElementById('timetablesSection');
      if (timetablesSection && timetablesSection.classList.contains('active')) {
        const currentBranch = document.getElementById('timetableBranch').value;
        const currentSemester = document.getElementById('timetableSemester').value;
        const currentSection = document.getElementById('timetableSection').value;
        
        // Always reload timetables if we're in timetables section, regardless of selection
        if (currentBranch && currentSemester && currentSection) {
          viewTimetable();
        }
      }
    }
    
    // Refresh student view
    function refreshStudentView(section, branch, semester, sectionName) {
      // Check if notes section is currently active
      if (section === 'notes') {
        const notesSection = document.getElementById('notesSection');
        if (notesSection && notesSection.classList.contains('active')) {
          const currentBranch = document.getElementById('notesBranch').value;
          const currentSemester = document.getElementById('notesSemester').value;
          const currentSection = document.getElementById('notesSection').value;
          
          // Always reload notes if we're in notes section, regardless of selection
          if (currentBranch && currentSemester && currentSection) {
            loadNotes();
          }
        }
      } else if (section === 'syllabus') {
        const syllabusSection = document.getElementById('syllabusSection');
        if (syllabusSection && syllabusSection.classList.contains('active')) {
          const currentBranch = document.getElementById('syllabusBranch').value;
          const currentSemester = document.getElementById('syllabusSemester').value;
          const currentSection = document.getElementById('syllabusSection').value;
          
          if (currentBranch && currentSemester && currentSection) {
            loadSyllabus();
          }
        }
      } else if (section === 'papers') {
        const papersSection = document.getElementById('papersSection');
        if (papersSection && papersSection.classList.contains('active')) {
          const currentBranch = document.getElementById('papersBranch').value;
          const currentSemester = document.getElementById('papersSemester').value;
          const currentSection = document.getElementById('papersSection').value;
          
          if (currentBranch && currentSemester && currentSection) {
            loadPapers();
          }
        }
      }
    }
    
    // Load galleries
    function loadGalleries() {
      loadTimetableGallery();
      loadNotesGallery();
      loadSyllabusGallery();
      loadPapersGallery();
    }
    
    // Load timetable gallery
    function loadTimetableGallery() {
      const gallery = document.getElementById('timetableGallery');
      gallery.innerHTML = '';
      
      const timetables = JSON.parse(localStorage.getItem('timetables')) || {};
      
      Object.keys(timetables).forEach(key => {
        const [branch, semester, sectionName] = key.split('-');
        
        const item = document.createElement('div');
        item.className = 'gallery-item';
        
        const img = document.createElement('img');
        img.src = timetables[key];
        img.alt = `${branch} Semester ${semester} Section ${sectionName} Timetable`;
        
        const title = document.createElement('div');
        title.className = 'gallery-item-title';
        title.textContent = `${branch} - Sem ${semester} - Sec ${sectionName}`;
        
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'delete-btn';
        deleteBtn.innerHTML = '&times;';
        deleteBtn.onclick = () => deleteTimetable(key);
        
        item.appendChild(img);
        item.appendChild(title);
        item.appendChild(deleteBtn);
        
        gallery.appendChild(item);
      });
      
      if (Object.keys(timetables).length === 0) {
        gallery.innerHTML = '<p>No timetables uploaded yet.</p>';
      }
    }
    
    // Load notes gallery
    function loadNotesGallery() {
      const gallery = document.getElementById('notesGallery');
      gallery.innerHTML = '';
      
      const notes = JSON.parse(localStorage.getItem('notes')) || {};
      
      Object.keys(notes).forEach(key => {
        const [branch, semester, sectionName] = key.split('-');
        
        notes[key].forEach((note, index) => {
          const item = document.createElement('div');
          item.className = 'file-gallery-item';
          
          const icon = document.createElement('div');
          icon.className = 'file-icon';
          icon.innerHTML = '';
          
          const info = document.createElement('div');
          info.className = 'file-info';
          
          const name = document.createElement('div');
          name.className = 'file-name';
          name.textContent = note.name || `Note ${index + 1}`;
          
          const meta = document.createElement('div');
          meta.className = 'file-meta';
          meta.textContent = `${branch} - Semester ${semester} - Section ${sectionName}`;
          
          info.appendChild(name);
          info.appendChild(meta);
          
          const actions = document.createElement('div');
          actions.className = 'file-actions';
          
          const viewBtn = document.createElement('button');
          viewBtn.className = 'file-action-btn view-file-btn';
          viewBtn.textContent = 'View';
          viewBtn.onclick = () => viewPDF(note.data, note.name || `Note ${index + 1}`);
          
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'file-action-btn delete-file-btn';
          deleteBtn.textContent = 'Delete';
          deleteBtn.onclick = () => deleteFile('notes', key, index);
          
          actions.appendChild(viewBtn);
          actions.appendChild(deleteBtn);
          
          item.appendChild(icon);
          item.appendChild(info);
          item.appendChild(actions);
          
          gallery.appendChild(item);
        });
      });
      
      if (Object.keys(notes).length === 0) {
        gallery.innerHTML = '<p>No notes uploaded yet.</p>';
      }
    }
    
    // Load syllabus gallery
    function loadSyllabusGallery() {
      const gallery = document.getElementById('syllabusGallery');
      gallery.innerHTML = '';
      
      const syllabus = JSON.parse(localStorage.getItem('syllabus')) || {};
      
      Object.keys(syllabus).forEach(key => {
        const [branch, semester, sectionName] = key.split('-');
        
        syllabus[key].forEach((paper, index) => {
          const item = document.createElement('div');
          item.className = 'file-gallery-item';
          
          const icon = document.createElement('div');
          icon.className = 'file-icon';
          icon.innerHTML = '';
          
          const info = document.createElement('div');
          info.className = 'file-info';
          
          const name = document.createElement('div');
          name.className = 'file-name';
          name.textContent = paper.name || `Syllabus Paper ${index + 1}`;
          
          const meta = document.createElement('div');
          meta.className = 'file-meta';
          meta.textContent = `${branch} - Semester ${semester} - Section ${sectionName}`;
          
          info.appendChild(name);
          info.appendChild(meta);
          
          const actions = document.createElement('div');
          actions.className = 'file-actions';
          
          const viewBtn = document.createElement('button');
          viewBtn.className = 'file-action-btn view-file-btn';
          viewBtn.textContent = 'View';
          viewBtn.onclick = () => viewPDF(paper.data, paper.name || `Syllabus Paper ${index + 1}`);
          
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'file-action-btn delete-file-btn';
          deleteBtn.textContent = 'Delete';
          deleteBtn.onclick = () => deleteFile('syllabus', key, index);
          
          actions.appendChild(viewBtn);
          actions.appendChild(deleteBtn);
          
          item.appendChild(icon);
          item.appendChild(info);
          item.appendChild(actions);
          
          gallery.appendChild(item);
        });
      });
      
      if (Object.keys(syllabus).length === 0) {
        gallery.innerHTML = '<p>No syllabus papers uploaded yet.</p>';
      }
    }
    
    // Load papers gallery
    function loadPapersGallery() {
      const gallery = document.getElementById('papersGallery');
      gallery.innerHTML = '';
      
      const papers = JSON.parse(localStorage.getItem('papers')) || {};
      
      Object.keys(papers).forEach(key => {
        const [branch, semester, sectionName] = key.split('-');
        
        papers[key].forEach((paper, index) => {
          const item = document.createElement('div');
          item.className = 'file-gallery-item';
          
          const icon = document.createElement('div');
          icon.className = 'file-icon';
          icon.innerHTML = '';
          
          const info = document.createElement('div');
          info.className = 'file-info';
          
          const name = document.createElement('div');
          name.className = 'file-name';
          name.textContent = paper.name || `Previous Year Paper ${index + 1}`;
          
          const meta = document.createElement('div');
          meta.className = 'file-meta';
          meta.textContent = `${branch} - Semester ${semester} - Section ${sectionName}`;
          
          info.appendChild(name);
          info.appendChild(meta);
          
          const actions = document.createElement('div');
          actions.className = 'file-actions';
          
          const viewBtn = document.createElement('button');
          viewBtn.className = 'file-action-btn view-file-btn';
          viewBtn.textContent = 'View';
          viewBtn.onclick = () => viewPDF(paper.data, paper.name || `Previous Year Paper ${index + 1}`);
          
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'file-action-btn delete-file-btn';
          deleteBtn.textContent = 'Delete';
          deleteBtn.onclick = () => deleteFile('papers', key, index);
          
          actions.appendChild(viewBtn);
          actions.appendChild(deleteBtn);
          
          item.appendChild(icon);
          item.appendChild(info);
          item.appendChild(actions);
          
          gallery.appendChild(item);
        });
      });
      
      if (Object.keys(papers).length === 0) {
        gallery.innerHTML = '<p>No previous year papers uploaded yet.</p>';
      }
    }
    
    // Delete timetable
    function deleteTimetable(key) {
      if (confirm('Are you sure you want to delete this timetable?')) {
        const timetables = JSON.parse(localStorage.getItem('timetables')) || {};
        delete timetables[key];
        localStorage.setItem('timetables', JSON.stringify(timetables));
        
        // Update gallery
        loadTimetableGallery();
        
        // Update upload cards
        generateUploadCards();
      }
    }
    
    // Delete file
    function deleteFile(type, key, index) {
      if (confirm('Are you sure you want to delete this file?')) {
        const files = JSON.parse(localStorage.getItem(type)) || {};
        
        if (files[key] && files[key].length > index) {
          const [branch, semester, sectionName] = key.split('-');
          
          files[key].splice(index, 1);
          
          if (files[key].length === 0) {
            delete files[key];
          }
          
          localStorage.setItem(type, JSON.stringify(files));
          
          // Update gallery
          if (type === 'notes') {
            loadNotesGallery();
            refreshStudentView('notes', branch, semester, sectionName);
          } else if (type === 'syllabus') {
            loadSyllabusGallery();
            refreshStudentView('syllabus', branch, semester, sectionName);
          } else if (type === 'papers') {
            loadPapersGallery();
            refreshStudentView('papers', branch, semester, sectionName);
          }
          
          // Update upload cards
          generateUploadCards();
        }
      }
    }
    
    // Close timetable modal
    function closeTimetableModal() {
      document.getElementById('timetableModal').style.display = 'none';
    }
    
    // Logout
    function logout() {
      sessionStorage.removeItem('adminLoggedIn');
      sessionStorage.removeItem('adminUsername');
      document.getElementById('adminDashboard').style.display = 'none';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Check if admin is logged in
    function checkAdminStatus() {
      const isLoggedIn = sessionStorage.getItem('adminLoggedIn') === 'true';
      if (isLoggedIn) {
        document.getElementById('adminDashboard').style.display = 'block';
        generateUploadCards();
        loadGalleries();
      }
    }
    
    // Initialize on page load
    window.onload = function() {
      initializeStorage();
      checkAdminStatus();
      
      // Add default admin credentials
      console.log('Default admin credentials:');
      console.log('Username: admin');
      console.log('Password: admin123');
    };
  </script>
</body>
</html>